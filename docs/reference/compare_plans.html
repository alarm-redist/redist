<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Make a comparison between two sets of plans — compare_plans • redist</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Make a comparison between two sets of plans — compare_plans"><meta property="og:description" content="This function provides one way to identify the structural differences between
two sets of redistricting plans. It operates by computing the precinct
co-occurrence matrix (a symmetric matrix where the i,j-th entry is the
fraction of plans where precinct i and j are in the same district) for each
set, and then computing the first eigenvalue of the difference in these two
matrices (in each direction). These eigenvalues identify the important parts
of the map."><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">redist</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">4.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/redist.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/common_args.html">Common Arguments to `redist` Functions</a>
    </li>
    <li>
      <a href="../articles/flip.html">Redistricting with Flip MCMC</a>
    </li>
    <li>
      <a href="../articles/map-preproc.html">Map Pre-processing for Special Constraints</a>
    </li>
  </ul></li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li class="dropdown-header">Releases</li>
    <li>
      <a href="https://alarm-redist.github.io/posts/2021-04-02-redist-300/" class="external-link">redist 3.0</a>
    </li>
    <li class="divider">
    <li>
      <a href="../news/index.html">Changelog</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/alarm-redist/redist/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Make a comparison between two sets of plans</h1>
    <small class="dont-index">Source: <a href="https://github.com/alarm-redist/redist/blob/HEAD/R/classify_compare.R" class="external-link"><code>R/classify_compare.R</code></a></small>
    <div class="hidden name"><code>compare_plans.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function provides one way to identify the structural differences between
two sets of redistricting plans. It operates by computing the precinct
co-occurrence matrix (a symmetric matrix where the i,j-th entry is the
fraction of plans where precinct i and j are in the same district) for each
set, and then computing the first eigenvalue of the difference in these two
matrices (in each direction). These eigenvalues identify the important parts
of the map.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">compare_plans</span><span class="op">(</span></span>
<span>  <span class="va">plans</span>,</span>
<span>  <span class="va">set1</span>,</span>
<span>  <span class="va">set2</span>,</span>
<span>  shp <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  plot <span class="op">=</span> <span class="st">"fill"</span>,</span>
<span>  thresh <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  labs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Set 1"</span>, <span class="st">"Set 2"</span><span class="op">)</span>,</span>
<span>  ncores <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>plans</dt>
<dd><p>a <a href="redist_plans.html">redist_plans</a> object</p></dd>


<dt>set1</dt>
<dd><p><code><a href="https://dplyr.tidyverse.org/reference/dplyr_data_masking.html" class="external-link">&lt;data-masking&gt;</a></code> indexing vectors
for the plan draws to compare.  Alternatively, a second <a href="redist_plans.html">redist_plans</a>
object to compare to.</p></dd>


<dt>set2</dt>
<dd><p><code><a href="https://dplyr.tidyverse.org/reference/dplyr_data_masking.html" class="external-link">&lt;data-masking&gt;</a></code> indexing vectors
for the plan draws to compare. Must be mutually exclusive with <code>set1</code>.</p></dd>


<dt>shp</dt>
<dd><p>a shapefile for plotting.</p></dd>


<dt>plot</dt>
<dd><p>If <code>plot="line"</code>, display a plot for each set showing the set of
boundaries which most distinguish it from the other set (the squared
differences in the eigenvector values across the boundary).  If
<code>plot="fill"</code>, plot the eigenvector for each set as a choropleth. If <code>plot = 'adj'</code>,
plot the shows the adjacency graph edges which most distinguish it from the other set.
The adj option is a different graphical option of the same information as the line
option. See below for more information.  Set to <code>FALSE</code> to disable plotting
(or leave out <code>shp</code>).</p></dd>


<dt>thresh</dt>
<dd><p>the value to threshold the eigenvector at in determining the
relevant set of precincts for comparison.</p></dd>


<dt>labs</dt>
<dd><p>the names of the panels in the plot.</p></dd>


<dt>ncores</dt>
<dd><p>the number of parallel cores to use.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>If possible, makes a comparison plot according to <code>plot</code>. Otherwise
returns the following list:</p>
<dl><dt>eigen1</dt>
<dd><p>A numeric vector containing the first eigenvector of
<code>p1 - p2</code>, where <code>p1</code> and <code>p2</code> are the co-occurrence matrices
for <code>set1</code> and <code>set2</code>, respectively.</p></dd>

<dt>eigen2</dt>
<dd><p>A numeric vector containing the first eigenvector of
<code>p2 - p1</code>, where <code>p1</code> and <code>p2</code> are the co-occurrence matrices
for <code>set1</code> and <code>set2</code>, respectively.</p></dd>

<dt>group_1a, group_1b</dt>
<dd><p>Lists of precincts. Compared to <code>set2</code>, in the
<code>set1</code> plans these precincts were much more likely to be in separate
districts. Computed by thresholding <code>eigen1</code> at <code>thresh</code>.</p></dd>

<dt>group_2a, group_2b</dt>
<dd><p>Lists of precincts. Compared to <code>set1</code>, in the
<code>set2</code> plans these precincts were much more likely to be in separate
districts. Computed by thresholding <code>eigen2</code> at <code>thresh</code>.</p></dd>

<dt>cooccur_sep_1</dt>
<dd><p>The difference in the average co-occurrence of precincts
in <code>group_1a</code> and <code>group_1b</code> between <code>set2</code> and <code>set1</code>.
Higher indicates better separation.</p></dd>

<dt>cooccur_sep_2</dt>
<dd><p>The difference in the average co-occurrence of precincts
in <code>group_2a</code> and <code>group_2b</code> between <code>set1</code> and <code>set2</code>.
Higher indicates better separation.</p></dd>

</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>The co-occurrence matrices are regularized with a \(Beta(1/ndists, 1-1/ndists)\)
prior, which is useful for when either <code>set1</code> or <code>set2</code> is small.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">iowa</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">iowa_map</span> <span class="op">&lt;-</span> <span class="fu"><a href="redist_map.html">redist_map</a></span><span class="op">(</span><span class="va">iowa</span>, ndists <span class="op">=</span> <span class="fl">4</span>, pop_tol <span class="op">=</span> <span class="fl">0.05</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">plans1</span> <span class="op">&lt;-</span> <span class="fu"><a href="redist_smc.html">redist_smc</a></span><span class="op">(</span><span class="va">iowa_map</span>, <span class="fl">100</span>, silent <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">plans2</span> <span class="op">&lt;-</span> <span class="fu"><a href="redist_mergesplit.html">redist_mergesplit</a></span><span class="op">(</span><span class="va">iowa_map</span>, <span class="fl">200</span>, warmup <span class="op">=</span> <span class="fl">100</span>, silent <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">compare_plans</span><span class="op">(</span><span class="va">plans1</span>, <span class="va">plans2</span>, shp <span class="op">=</span> <span class="va">iowa_map</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="compare_plans-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="fu">compare_plans</span><span class="op">(</span><span class="va">plans2</span>, <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">draw</span><span class="op">)</span> <span class="op">&lt;=</span> <span class="fl">20</span>,</span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">draw</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">20</span>, shp <span class="op">=</span> <span class="va">iowa_map</span>, plot <span class="op">=</span> <span class="st">"line"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="compare_plans-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Christopher T. Kenny, Cory McCartan, Ben Fifield, Kosuke Imai.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

