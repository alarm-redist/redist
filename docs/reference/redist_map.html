<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Create a redist_map object. — redist_map • redist</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create a redist_map object. — redist_map"><meta name="description" content="Sets up a redistricting problem."><meta property="og:description" content="Sets up a redistricting problem."><meta property="og:image" content="/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">redist</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">4.3.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/redist.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/common_args.html">Common Arguments to `redist` Functions</a></li>
    <li><a class="dropdown-item" href="../articles/flip.html">Redistricting with Flip MCMC</a></li>
    <li><a class="dropdown-item" href="../articles/map-preproc.html">Map Pre-processing for Special Constraints</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news"><li><h6 class="dropdown-header" data-toc-skip>Releases</h6></li>
    <li><a class="external-link dropdown-item" href="https://alarm-redist.github.io/posts/2021-04-02-redist-300/">redist 3.0</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/alarm-redist/redist/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Create a <code>redist_map</code> object.</h1>
      <small class="dont-index">Source: <a href="https://github.com/alarm-redist/redist/blob/HEAD/R/redist_map.R" class="external-link"><code>R/redist_map.R</code></a></small>
      <div class="d-none name"><code>redist_map.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Sets up a redistricting problem.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">redist_map</span><span class="op">(</span></span>
<span>  <span class="va">...</span>,</span>
<span>  existing_plan <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  pop_tol <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  total_pop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"pop"</span>, <span class="st">"population"</span>, <span class="st">"total_pop"</span>, <span class="st">"POP100"</span><span class="op">)</span>,</span>
<span>  ndists <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  pop_bounds <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  adj <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  adj_col <span class="op">=</span> <span class="st">"adj"</span>,</span>
<span>  planarize <span class="op">=</span> <span class="fl">3857</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">as_redist_map</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>column elements to be bound into a <code>redist_map</code> object or a
single <code>list</code> or <code>data.frame</code>.  These will be passed on to the
<a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble::tibble</a> constructor.</p></dd>


<dt id="arg-existing-plan">existing_plan<a class="anchor" aria-label="anchor" href="#arg-existing-plan"></a></dt>
<dd><p><code><a href="https://dplyr.tidyverse.org/reference/dplyr_tidy_select.html" class="external-link">&lt;tidy-select&gt;</a></code> the
existing district assignment. Must be numeric or convertible to numeric.</p></dd>


<dt id="arg-pop-tol">pop_tol<a class="anchor" aria-label="anchor" href="#arg-pop-tol"></a></dt>
<dd><p><code><a href="https://dplyr.tidyverse.org/reference/dplyr_data_masking.html" class="external-link">&lt;data-masking&gt;</a></code> the population tolerance.
The percentage deviation from the average population will be constrained to
be no more than this number. If <code>existing_plan</code> is provided, defaults to
the parity of that plan; otherwise, defaults to 0.01.</p></dd>


<dt id="arg-total-pop">total_pop<a class="anchor" aria-label="anchor" href="#arg-total-pop"></a></dt>
<dd><p><code><a href="https://dplyr.tidyverse.org/reference/dplyr_tidy_select.html" class="external-link">&lt;tidy-select&gt;</a></code> the vector
of precinct populations. Defaults to the <code>pop</code>, <code>population</code>, or
<code>total_pop</code> columns, if one exists.</p></dd>


<dt id="arg-ndists">ndists<a class="anchor" aria-label="anchor" href="#arg-ndists"></a></dt>
<dd><p><code><a href="https://dplyr.tidyverse.org/reference/dplyr_data_masking.html" class="external-link">&lt;data-masking&gt;</a></code> the integer number of
districts to partition the map into. Must be specified if <code>existing_plan</code> is not supplied.</p></dd>


<dt id="arg-pop-bounds">pop_bounds<a class="anchor" aria-label="anchor" href="#arg-pop-bounds"></a></dt>
<dd><p><code><a href="https://dplyr.tidyverse.org/reference/dplyr_data_masking.html" class="external-link">&lt;data-masking&gt;</a></code> more specific
population bounds, in the form of <code>c(lower, target, upper)</code>.</p></dd>


<dt id="arg-adj">adj<a class="anchor" aria-label="anchor" href="#arg-adj"></a></dt>
<dd><p>the adjacency graph for the object. Defaults to being computed
from the data if it is coercible to a shapefile.</p></dd>


<dt id="arg-adj-col">adj_col<a class="anchor" aria-label="anchor" href="#arg-adj-col"></a></dt>
<dd><p>the name of the adjacency graph column</p></dd>


<dt id="arg-planarize">planarize<a class="anchor" aria-label="anchor" href="#arg-planarize"></a></dt>
<dd><p>a number, indicating the CRS to project the shapefile to if
it is latitude-longitude based. Set to NULL or FALSE to avoid planarizing.</p></dd>


<dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>an object to be coerced</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A redist_map object</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>A <code>redist_map</code> object is a <a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble::tibble</a> which contains an
adjacency list and additional information about the number of districts and
population bounds.  It supports all of the <code>dplyr</code> generics, and will
adjust the adjacency list and attributes according to these functions; i.e.,
if we <code>filter</code> to a subset of units, the graph will change to subset to
these units, and the population bounds will adjust accordingly.  If an
existing map is also attached to the object, the number of districts will
also adjust.  Subsetting with <code>`[`</code> and <code>`[[`</code> does not recompute
graphs or attributes.</p>
<p>Other useful methods for <code>redist_map</code> objects:</p><ul><li><p><code><a href="merge_by.html">merge_by</a></code></p></li>
<li><p><code><a href="get_adj.html">get_adj</a></code></p></li>
<li><p><code><a href="plot.redist_map.html">plot.redist_map</a></code></p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">fl25</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu">redist_map</span><span class="op">(</span><span class="va">fl25</span>, ndists <span class="op">=</span> <span class="fl">3</span>, pop_tol <span class="op">=</span> <span class="fl">0.05</span>, total_pop <span class="op">=</span> <span class="va">pop</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Projecting to CRS 3857</span>
<span class="r-in"><span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">d</span>, <span class="va">pop</span> <span class="op">&gt;=</span> <span class="fl">10e3</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Your subset was not based on districts.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> → Please use `set_pop_tol()` to update your <span style="color: #0000BB;">&lt;redist_map&gt;</span> or create a new</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>   <span style="color: #0000BB;">&lt;redist_map&gt;</span> with the correct number of districts.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> A <span style="color: #0000BB;">&lt;redist_map&gt;</span> with 5 units and 13 fields</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> To be partitioned into 3 districts with population between 58,347.67 - 5.0% and 58,347.67 + 5.0%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> With geometry:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     bbox:           xmin: -9107951 ymin: 3047341 xmax: -9065127 ymax: 3085829</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     projected CRS:  WGS 84 / Pseudo-Mercator</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 5 × 13</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   geoid10    pop   vap obama mccain TotPop BlackPop HispPop   VAP BlackVAP</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> 2519.0_0 <span style="text-decoration: underline;">15</span>993 <span style="text-decoration: underline;">12</span>379   647   <span style="text-decoration: underline;">1</span>522  <span style="text-decoration: underline;">15</span>993      863    <span style="text-decoration: underline;">1</span>980 <span style="text-decoration: underline;">12</span>379      582</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> 2396.0_0 <span style="text-decoration: underline;">12</span>853  <span style="text-decoration: underline;">8</span>965   640   <span style="text-decoration: underline;">1</span>027  <span style="text-decoration: underline;">12</span>853     <span style="text-decoration: underline;">2</span>368    <span style="text-decoration: underline;">3</span>860  <span style="text-decoration: underline;">8</span>965     <span style="text-decoration: underline;">1</span>468</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> 2515.0_0 <span style="text-decoration: underline;">22</span>218 <span style="text-decoration: underline;">14</span>513   506    641  <span style="text-decoration: underline;">22</span>218     <span style="text-decoration: underline;">5</span>911    <span style="text-decoration: underline;">8</span>800 <span style="text-decoration: underline;">14</span>513     <span style="text-decoration: underline;">3</span>417</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> 2525.0_0 <span style="text-decoration: underline;">16</span>734 <span style="text-decoration: underline;">14</span>720   826   <span style="text-decoration: underline;">1</span>414  <span style="text-decoration: underline;">16</span>734      197     791 <span style="text-decoration: underline;">14</span>720      155</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> 1246.0_0 <span style="text-decoration: underline;">12</span>289  <span style="text-decoration: underline;">7</span>734   366    271  <span style="text-decoration: underline;">12</span>289     <span style="text-decoration: underline;">1</span>693    <span style="text-decoration: underline;">9</span>773  <span style="text-decoration: underline;">7</span>734     <span style="text-decoration: underline;">1</span>062</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 3 more variables: HispVAP &lt;dbl&gt;, geometry &lt;POLYGON [m]&gt;, adj &lt;list&gt;</span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Christopher T. Kenny, Cory McCartan, Ben Fifield, Kosuke Imai.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

