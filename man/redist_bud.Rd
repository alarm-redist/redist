% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/redist_bud.R
\name{redist_bud}
\alias{redist_bud}
\title{Balanced Up-Down Walk MCMC Redistricting Sampler}
\usage{
redist_bud(
  map,
  nsims,
  chains = 1,
  warmup = 0,
  thin = 10L,
  init_plan = NULL,
  counties = NULL,
  compactness = 1,
  constraints = list(),
  ncores = NULL,
  cl_type = "PSOCK",
  return_all = TRUE,
  init_name = NULL,
  verbose = FALSE,
  silent = FALSE
)
}
\arguments{
\item{map}{A \link{redist_map} object.}

\item{nsims}{The number of samples to draw per chain, not including warmup.}

\item{chains}{The number of parallel chains to run. Each chain will have
\code{nsims} draws. If \code{init_plan} is sampled, each chain will be initialized
with its own sampled plan. Defaults to 1.}

\item{warmup}{The number of warmup samples to discard.}

\item{thin}{Save every \code{thin}-th sample. Defaults to 10.}

\item{init_plan}{The initial state of the map, provided as a single vector
to be shared across all chains, or a matrix with \code{chains} columns.
If not provided, will default to the reference map of the \code{map} object, or if
none exists, will sample a random initial state using \link{redist_smc}. You can
also request a random initial state for each chain by setting
\code{init_plan="sample"}.}

\item{counties}{A vector containing county (or other administrative or
geographic unit) labels for each unit, which may be integers ranging from 1
to the number of counties, or a factor or character vector.}

\item{compactness}{Controls the compactness of the generated districts, with
higher values preferring more compact districts. Must be nonnegative. A
value of 0 samples uniformly over partitions. Default is \code{1}.}

\item{constraints}{A \link{redist_constr} object or list of constraints.}

\item{ncores}{The number of parallel processes to run. Defaults to the
number of available cores, capped at the number of chains.}

\item{cl_type}{The cluster type (see \code{\link[parallel:makeCluster]{parallel::makeCluster()}}). Safest is \code{"PSOCK"},
but \code{"FORK"} may be appropriate in some settings.}

\item{return_all}{If \code{TRUE} return all sampled plans; otherwise, just return
the final plan from each chain.}

\item{init_name}{A name for the initial plan, or \code{FALSE} to not include
the initial plan in the output.  Defaults to the column name of the
existing plan, or \verb{<init>} if the initial plan is sampled.}

\item{verbose}{Whether to print out intermediate information while sampling.}

\item{silent}{Whether to suppress all diagnostic information.}
}
\value{
A \link{redist_plans} object containing the simulated plans. If \code{chains > 1},
the output will include a \code{chain} column indicating which chain each plan
came from.
}
\description{
\code{redist_bud} uses a Markov Chain Monte Carlo algorithm based on
the Balanced Up-Down Walk method to generate redistricting plans. The algorithm
maintains a spanning forest representation of districts with a district-level
tree connected by marked edges, and proposes changes by forming multi-district
cycles and resampling balanced cuts.
}
\details{
This function draws samples from a specific target measure, controlled by the
\code{map}, \code{compactness}, and \code{constraints} parameters.
}
\examples{
data(fl25)
fl_map <- redist_map(fl25, ndists = 3, pop_tol = 0.1)
sampled <- redist_bud(fl_map, 100)

}
\concept{simulate}
