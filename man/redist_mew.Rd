% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/redist_mew.R
\name{redist_mew}
\alias{redist_mew}
\title{Marked Edge Walk MCMC Redistricting Sampler (McWhorter and DeFord 2024)}
\usage{
redist_mew(
  map,
  nsims,
  warmup = 0L,
  thin = 1L,
  init_plan = NULL,
  compactness = 1,
  counties = NULL,
  constraints = list(),
  init_name = NULL,
  chains = 1L,
  ncores = NULL,
  cl_type = "PSOCK",
  verbose = FALSE,
  silent = FALSE
)
}
\arguments{
\item{map}{A \link{redist_map} object.}

\item{nsims}{The number of samples to draw, including warmup.}

\item{warmup}{The number of warmup samples to discard.}

\item{thin}{Save every \code{thin}-th sample. Defaults to no thinning (1).}

\item{init_plan}{The initial state of the map. If not provided, will default
to the reference map of the \code{map} object, or if none exists, will
sample a random initial state using \code{\link[=redist_smc]{redist_smc()}}. You can also
request a random initial state by setting \code{init_plan="sample"}.}

\item{compactness}{Controls the compactness of the generated districts, with
higher values preferring more compact districts. Must be nonnegative.
A value of 1 (the default) retains the spanning tree measure.
A value of 0 samples uniformly over partitions.}

\item{counties}{A vector containing county (or other administrative or
geographic unit) labels for each unit, which may be integers ranging from 1
to the number of counties, or a factor or character vector.  If provided,
the spanning tree compactness measure will respect county boundaries.
To constrain county splits further, consider using
\code{\link[=add_constr_splits]{add_constr_splits()}}, \code{\link[=add_constr_multisplits]{add_constr_multisplits()}}, and
\code{\link[=add_constr_total_splits]{add_constr_total_splits()}}.}

\item{constraints}{A \link{redist_constr} object or a list containing
information on sampling constraints. See \link{redist_constr} for more
information.}

\item{init_name}{A name for the initial plan, or \code{FALSE} to not include
the initial plan in the output. Defaults to the column name of the existing
plan, or \code{"<init>"} if the initial plan is sampled.}

\item{chains}{The number of parallel chains to run. Each chain will have
\code{nsims} draws. If \code{init_plan} is sampled, each chain will be initialized
with its own sampled plan. Defaults to 1 (no parallelization).}

\item{ncores}{The number of parallel processes to run. Defaults to the
number of available cores. Only used if \code{chains > 1}.}

\item{cl_type}{The cluster type (see \code{\link[parallel:makeCluster]{parallel::makeCluster()}}). Safest is \code{"PSOCK"},
but \code{"FORK"} may be appropriate in some settings. Only used if \code{chains > 1}.}

\item{verbose}{Whether to print out intermediate information while sampling.
Recommended.}

\item{silent}{Whether to suppress all diagnostic information.}
}
\value{
\code{redist_mew} returns a \link{redist_plans} object containing the
simulated plans.
}
\description{
\code{redist_mew} uses a Markov Chain Monte Carlo algorithm based on marked
edge walks on spanning trees (McWhorter and DeFord 2024) to generate
congressional or legislative redistricting plans according to contiguity,
population, compactness, and other custom constraints.
}
\section{Parallel Execution}{

When using multiple chains (\code{chains > 1}), each chain runs independently in
parallel. Note that parallel execution may not be perfectly reproducible even
with the same \code{set.seed()}. Use \code{chains = 1} if perfect reproducibility is required.
Statistical independence between chains is preserved regardless of reproducibility.
}

\examples{
data(fl25)
fl_map <- redist_map(fl25, ndists = 3, pop_tol = 0.1)

redist_mew(fl_map, 200)

redist_mew(fl_map, 200, chains = 2, ncores = 2)

}
\references{
McWhorter, A., & DeFord, D. (2025). The Marked Edge Walk: A Novel MCMC
Algorithm for Sampling of Graph Partitions.
}
\concept{simulate}
